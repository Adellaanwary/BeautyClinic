-- Hanya include 1x diawal
-- create user beautyclinic identified by beautyclinic;
-- grant dba to beautyclinic;
-- conn beautyclinic/beautyclinic;

DROP TABLE MEMBER CASCADE CONSTRAINT PURGE;
DROP TABLE PELANGGAN CASCADE CONSTRAINT PURGE;
DROP TABLE PERAWATAN CASCADE CONSTRAINT PURGE;
DROP TABLE STAFF CASCADE CONSTRAINT PURGE;
DROP TABLE OBAT CASCADE CONSTRAINT PURGE;
DROP TABLE HEADER_TRANSAKSI CASCADE CONSTRAINT PURGE;
DROP TABLE DETAIL_TRANSAKSI CASCADE CONSTRAINT PURGE;

CREATE TABLE MEMBER
(
	ID_MEMBER VARCHAR2(10) PRIMARY KEY,
	NAMA_MEMBER VARCHAR2(255) NOT NULL,
	ALAMAT_MEMBER VARCHAR2(150) NOT NULL,
	TELEPON_MEMBER NUMBER(13) NOT NULL,
	EMAIL_MEMBER VARCHAR2(255),
	STATUS_MEMBER VARCHAR2(1) NOT NULL CHECK(STATUS_MEMBER = '0' OR STATUS_MEMBER = '1')
);

CREATE TABLE PELANGGAN
(
	ID_PELANGGAN VARCHAR2(10) PRIMARY KEY,
	NAMA_PELANGGAN VARCHAR2(10) NOT NULL,
	TELEPON_PELANGGAN NUMBER(13) NOT NULL,
	ID_MEMBER VARCHAR2(10) REFERENCES MEMBER(ID_MEMBER)
);

CREATE TABLE PERAWATAN
(
	ID_PERAWATAN VARCHAR2(10) PRIMARY KEY,
	NAMA_PERAWATAN VARCHAR2(150) NOT NULL,
	HARGA_PERAWATAN NUMBER(10) NOT NULL,
	STATUS_PERAWATAN VARCHAR2(1) NOT NULL CHECK(STATUS_PERAWATAN = '0' OR STATUS_PERAWATAN = '1')
);

CREATE TABLE STAFF
(
	ID_STAFF VARCHAR2(10) PRIMARY KEY,
	NAMA_STAFF VARCHAR2(150) NOT NULL,
	ALAMAT_STAFF VARCHAR2(150) NOT NULL,
	TELEPON_STAFF NUMBER(13) NOT NULL,
	JABATAN_STAFF VARCHAR2(50) NOT NULL,
	PASSWORD_STAFF VARCHAR2(255) NOT NULL,
	STATUS_STAFF VARCHAR2(1) NOT NULL CHECK(STATUS_STAFF = '0' OR STATUS_STAFF = '1')
);

CREATE TABLE OBAT
(
	ID_OBAT VARCHAR2(10) PRIMARY KEY,
	NAMA_OBAT VARCHAR2(150) NOT NULL,
	STOK_OBAT NUMBER(5) NOT NULL,
	STATUS_OBAT VARCHAR2(1) NOT NULL CHECK(STATUS_OBAT = '0'  OR STATUS_OBAT = '1'),
	HARGA_BELI NUMBER(7) NOT NULL,
	HARGA_JUAL NUMBER(7) NOT NULL,
	SKU VARCHAR2(10) NOT NULL,
	DISTRIBUTOR VARCHAR(25) NOT NULL,
	RESEP VARCHAR2(1) NOT NULL CHECK(RESEP = 'Y' OR RESEP = 'N'),
	EXP_DATE DATE NOT NULL
);

CREATE TABLE HEADER_TRANSAKSI
(
	ID_TRANS VARCHAR2(10) PRIMARY KEY,
	TOTAL_TRANS NUMBER(10) NOT NULL,
	TANGGAL DATE NOT NULL,
	ID_PELANGGAN VARCHAR2(10) REFERENCES PELANGGAN(ID_PELANGGAN),
	PEMBAYARAN VARCHAR2(10) CHECK(PEMBAYARAN = 'TUNAI' OR PEMBAYARAN = 'TRANSFER'),
	STATUS_TRANS VARCHAR2(1) NOT NULL,
	ID_PERAWATAN VARCHAR2(10) REFERENCES PERAWATAN(ID_PERAWATAN),
	ID_BEAUTICIAN VARCHAR2(10) REFERENCES STAFF(ID_STAFF),
	ID_OPERATOR VARCHAR2(10) REFERENCES STAFF(ID_STAFF)
);

CREATE TABLE DETAIL_TRANSAKSI
(
	ID_TRANS VARCHAR2(10) REFERENCES HEADER_TRANSAKSI(ID_TRANS),
	ID_OBAT VARCHAR2(10) REFERENCES OBAT(ID_OBAT),
	QTY NUMBER(2) NOT NULL
);


--BO - Beauty Operator
INSERT INTO STAFF VALUES('BO0001', 'CelineWijaya', 'Kapasan Dalam 23', '085962345897', 'Beauty operator', 'celine', '1');
INSERT INTO STAFF VALUES('BO0002', 'StefanieAngelina', 'Kapasari 5', '089529134567', 'Beauty operator', 'stefanie', '1');
--BA - Beautician Assistant 
INSERT INTO STAFF VALUES('BA0001', 'GloriaMargaret', 'Jagalan 3 / 12', '081523698745', 'Beautician assistant', 'gloria', '1');
INSERT INTO STAFF VALUES('BA0002', 'Liona', 'Sidodadi 25', '085956321458', 'Beautician assistant', 'liona', '1');
INSERT INTO STAFF VALUES('BA0003', 'DewiFortuna', 'Lebak Timur 25', '081450003012', 'Beautician assistant', 'dewi', '1');
INSERT INTO STAFF VALUES('BA0004', 'Angela', 'Babatan Mukti 15', '081546932541', 'Beautician assistant', 'angela', '0');
INSERT INTO STAFF VALUES('BA0005', 'VictoriaAlexandra', 'Vila Telaga Warna C2-12', '089523647895', 'Beautician assistant', 'victoria', '0');
--BN - Beautician
INSERT INTO STAFF VALUES('BN0001', 'AdellaAnwary', 'Ngangel Jaya 52', '0814563294787', 'Beautician', 'adella', '1');
INSERT INTO STAFF VALUES('BN0002', 'KimberlyWijaya', 'Kertopaten 36', '0814579325657', 'Beautician', 'kimberly', '1');
INSERT INTO STAFF VALUES('BN0003', 'AyleneAtmaja', 'Ngagel Jaya Tengah 15', '089523697485', 'Beautician', 'aylene', '1');
INSERT INTO STAFF VALUES('BN0004', 'KeyraHousten', 'Puri Sentra Raya H8-16', '081253698745', 'Beautician', 'keyra', '0');
INSERT INTO STAFF VALUES('BN0005', 'DianaPratama', 'Taman Internasional b7-28', '085125369187', 'Beautician', 'diana', '0');
--AN - Admin
INSERT INTO STAFF VALUES('AN0001', 'ErlandG', 'Ngangel Jaya Selatan 7', '0815469325778', 'Admin', 'erland', '1');
INSERT INTO STAFF VALUES('AN0002', 'JimmyPratama', 'Ngagel Tama 13', '089563245678', 'Admin', 'jimmy', '1');

-- OBAT
INSERT INTO OBAT VALUES('BE0001', 'Benzoyl Peroxide', '50', '1', '20200', '23250', 'AC-BL-GL', 'BOGOR', 'N', TO_DATE('29-03-2022', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('TR0001', 'Tretinoin', '25', '1', '29750', '35500', 'AC-RD-KR', 'JAKARTA', 'Y', TO_DATE('20-01-2021', 'DD-MM-YY'));
INSERT INTO OBAT VALUES('H20001', 'H2 Fair Skin', '150', '1', '180000', '220000', 'SK-NN-CP', 'SURABAYA', 'N', TO_DATE('19-02-2023', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('AL0001', 'Aloe 10.000 and Probiotics Veg Capsules', '10', '1', '250000', '300000', 'FC-NN-CP', 'BANTEN', 'N', TO_DATE('17-01-2021', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('AL0002', 'Aldactone 25mg', '80', '1', '135000', '140000', 'AC-BL-TB', 'SURABAYA', 'Y', TO_DATE('25-05-2022', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('RA0001', 'Radiance Marine Q10', '75', '1', '350000', '385500', 'SK-NN-CP', 'JAKARTA', 'N', TO_DATE('04-12-2021', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('IS0001', 'Isotretinoin', '100', '1', '40000', '55000', 'AC-RD-GL', 'JAKARTA', 'Y', TO_DATE('17-02-2022', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('OX0001', 'Oxy 5', '200', '1', '90000', '99000', 'AC-NN-GL', 'JAKARTA', 'N', TO_DATE('11-01-21', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('AC0003', 'Acnes Seiling Jell', '180', '1', '20000', '32000', 'AC-NN-GL', 'SURABAYA', 'N', TO_DATE('01-11-2022', 'DD-MM-YYYY'));
INSERT INTO OBAT VALUES('AC0004', 'Acyclovir 5%', '20', '1', '3000', '5000', 'AC-NN-KR', 'SURABAYA', 'N', TO_DATE('19-12-2022', 'DD-MM-YYYY'));


SELECT NAMA_STAFF, PASSWORD_STAFF, JABATAN_STAFF FROM STAFF 
WHERE NAMA_STAFF='StefanieAngelina' AND PASSWORD_STAFF='stefanie';